<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function promise1(flag) {
            return new Promise(function (resolve, reject) {
                if (flag) {
                    resolve(`promise상태는 fullfilled! tnen으로 연결됩니다 \n 이때의 flag가 ${flag}입니다. `)
                } else {
                    reject(`promise상태는 rejected! catch로 연결됩니다.\n 이때의 flag는 ${flag}입니다.`)
                }
            })
        }

        // promise1(false)
        //  .then(function(result){
        //     console.log(result)
        //  })
        //  .catch(function(err){
        //     console.log(err)
        //  })

        // function goMart(){
        //     console.log('마트에 가서 어떤 음료를 살지 고민한다.');
        // }
        // function pickDrink(){
        //     setTimeout(function(){
        //         console.log('고민 끝!!');
        //         product = '제로콜라';
        //         price=2000;
        //         callback(product, price)
        //     }, 3000);
        // }
        // function pay(product, price){
        //         console.log(`상품명 : ${product}, 가격 : ${price}`);
        // }
        // let product;
        // let price;
        // goMart();
        // pickDrink().then(pay);
        // pay(product, price);

        // function goMart(){
        //     console.log('마트에 가서 어떤 음료를 살지 고민한다.');
        // }
        // function pickDrink(){
        //     return new Promise(function(resolve, reject){
        //         setTimeout(function(){
        //             console.log('고민 끝!!');
        //             product ='제로 콜라';
        //             price = 2000;
        //             resolve();
        //         }, 3000);
        //     })
        // }
        // let product;
        // let price;
        // goMart();
        // pickDrink().then(function (){
        //     console.log(`상품명 : ${product}, 가격: ${price}`);
        // });


        // promise 체이닝 사용 안한 경우

        // function add(n1, n2, cb){
        //     setTimeout(function(){
        //         let result = n1 + n2;
        //         cb(result);
        //     }, 1000);
        // }
        // function mul(n, cb){
        //     setTimeout(function(){
        //         let result = n * 2;
        //         cb(result);
        //     }, 700);
        // }
        // function sub(n, cb){
        //     setTimeout(function(){
        //         let result = n - 1;
        //         cb(result);
        //     }, 500);
        // }

        // add(4, 3, function(x){
        //     console.log('1: ', x);
        //     mul(x, function(y){
        //         console.log('2: ', y);
        //         sub(y, function(z){
        //             console.log('2: ', z);
        //         });
        //     });
        // });



        // promise 체이닝 사용 한 경우

        // function add(n1, n2){
        //     return new Promise(function(resolve, reject){
        //         setTimeout(function(){
        //             let result = n1+ n2;
        //             resolve(result);
        //         }, 1000);
        //     });
        // }
        // function mul(n){
        //     return new Promise(function(resolve, reject){
        //         setTimeout(function(){
        //             let result = n * 2;
        //             resolve(result);
        //         }, 700);
        //     });
        // }
        // function sub(n){
        //     return new Promise(function(resolve, reject){
        //         setTimeout(function(){
        //             let result = n - 1;
        //             // resolve(result);
        //             reject(new Error('의도적으로 에러를 일으켜 봤음!'));
        //         }, 500);
        //     });
        // }

        // add(4, 3)
        //  .then(function(result){
        //     console.log('1: ', result);
        //     return mul(result);
        //  })
        //  .then(function(result){
        //     console.log('2: ', result);
        //     return sub(result);
        //  })
        //  .then(function(result){
        //     console.log('3: ', result);
        //  })
        //  .catch(function(err){
        //     console.log('실패!');
        //     console.log(err);
        //  });


        function goMart() {
            console.log('마트에 가서 어떤 음료를 살지 고민한다.');
        }
        function pickDrink() {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    console.log('고민 끝!!');
                    product = '제로 콜라';
                    price = 2000;
                    resolve();
                }, 3000);
            })
        }
        function pay() {
            console.log(`상품명 : ${product}, 가격: ${price}`);
        }

        async function exec() {
            goMart();
            await pickDrink();
            pay();
        }

        let product;
        let price;
        exec();


    </script>
</body>

</html>